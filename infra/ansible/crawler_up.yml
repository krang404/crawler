---
- name: Touche docker compose
  hosts: all
  tasks:


  - name: Make docker compose file fo crawler
    template:
      src: templates/docker-compose.yml.j2
      dest: /opt/crawler/docker-compose.yml

  - name: Login into Yandex Cloud Container Registry
    command:
      cmd: docker login --username iam --password t1.9euelZrMic_InZiPyMaMxpzHmo6Qke3rnpWams6bnZ2XksmSlpSUy8bNio7l8_d9O2Fo-e9nEEIR_t3z9z1qXmj572cQQhH-zef1656VmpGex42KzseYkZPGypOXjImQ7_0.Yf_h2sDfqOoFooXMxoOUtMdCFQ1iQZ73mbN7D4puMBibmDTYFwtIDvdnsb9B0NMde3XygTa0UGXcumcQcbIPAw cr.yandex


  - name: Docker Compose DOWN
    community.docker.docker_compose:
      project_src: /opt/crawler/
      state: absent


  - name: Docker Compose UP
    community.docker.docker_compose:
      project_src: /opt/crawler/
